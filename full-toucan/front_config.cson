settings:
  comparison:
    description: "Sur tous les écrans de comparaison, comparer avec :"
    values: [
      "Par défaut"
      "Entity A"
      "Entity B"
      "Entity C"
    ]
    default: "Par défaut"

glossary:
  title: 'Glossaire'
  terms: [
    term: "Data"
    meaning: "An android from the 24th century who serves on the star ship Enterprise.<br><em>Data kicked some borg ass and then fed his cat lunch.</em>"
  ,
    term: "Hipsterectomy"
    meaning: "The removal or dismissal of what is largely accepted to be cool or trendy. The process of de-hipsterizing someone or something."
  ,
    term: "Graph"
    meaning: "A slang term for a sketching of what someone plans on tagging. graffiti. <br><em>NOT A CHART!</em>"
  ]

slidePdfEnabled: true
dashboardPdfEnabled: false
captureChartEnabled: true
sharingOptions: true
comments: true
embedCharts: true

noDataError:
  message: "<div class=\"error-first-word\">Désolé,</div>aucune donnée n'est disponible. Pour obtenir des données sur cet écran choisissez un autre rapport"
  clues: ['report-selector', 'bottom-filter', 'settings', 'menu']

title: 'Test'

dataProviders:
  "google-sheets": {}

home:
  skipToReport: "0"

slides: [
  {
    level: 0
    id: 0
  }
  {
    level: 1
    title: "Ventes Globales"
    id: 10
  }
  {
    level: 1
    title: "Satisfaction"
    id: 20
  }
  {
    level: 1
    title: "Connectors"
    id: 30
  }
  {
    level: 2
    title: "Produits phares"
    parent_id: 10
    id: 200
  }
  {
    level: 2
    title: "Performance"
    parent_id: 10
    id: 201
  }
  {
    level: 2
    title: "Tendance de fond"
    parent_id: 10
    id: 202
  }
  {
    level: 2
    title: "Segmentation marketing"
    parent_id: 10
    id: 206
  }
  {
    level: 2
    title: "Analyse par zone"
    parent_id: 10
    id: 204
  }
  {
    level: 2
    title: "Structure financière"
    parent_id: 10
    id: 207
  }
  {
    level: 3
    title: "Classement<br>traffic"

    parent_id: 201
    filters:
      "bottom-right":
        on: "breakdown"
        type: "buttons"
    chartOptions:
      data:
        query:
          domain: "<%= report.id %>_30201"
      chartType: "horizontalBarchart"
      groups: "group"
      label: "Retailer name"
      value: "value"
      filters:
        "upper-right":
          on: "Branch level 2"
          type: "dropdown"
          reset: "All"
          withSize: true

      sentiment:
        value:
          domain: [8,18]
          range: ['negative','warning','positive']

      units:
        GLA: "points de vente"
        value:
          breakdown:
            Visites: ""
            Traffic: ""
            Satisfaction: "%"
            Conversion: "%"

      legend: true
      sort: "desc"
      meta: [
        "GLA"
        "Lease end"
      ]
      showAverage: true
      source: "SI Ramphastos - Enquêtes terrain"
    linkTo: [
      type: 'slide'
      id: 30202
      legend: 'Vue performace'
    ,
      type: 'dashboard'
      id: 0
      legend: 'Vers dashboard'
    ]
    id: 30201
  }
  {
    level: 3
    title: "Classement<br>Performance"

    parent_id: 201
    filters:
      "bottom-right":
        on: "breakdown"
        type: "buttons"
    chartOptions:
      data:
        query:
          domain: "<%= report.id %>_30202"
      chartType: "horizontalBarchart"
      groups: "group"
      label: "Retailer name"
      value: "value"
      filters:
        "upper-right":
          on: "Branch level 2"
          type: "dropdown"
          reset: "All"
          withSize: true

      units:
        GLA: "points de vente"
        value:
          breakdown:
            Promotion: ""
            "Points de vente": ""
            "Croissance du marché": "%"
            Sales: "%"

      legend: true
      sort: "desc"
      meta: [
        "GLA"
        "Lease end"
      ]
      showAverage: true

    id: 30202
  }

  {
    level: 3
    title: "Notation<br>par segments"

    parent_id: 201
    filters:
      "bottom-right":
        on: "Breakdown"
        type: "buttons"

    chartOptions:
      data:
        query:
          domain: "<%= report.id %>_30203"
      chartType: "leaderboardCenteredAverage"
      groups: "group"
      value: "value"
      label: "label"
      variation: "ecart2011"
      variationLegend: "Écart significatif<br>// 2011"
      units:
        value: ""
        ecart2011: ""
        Effectif: " personnes"

      sort: 'desc'
      reverse: true
      average:
        values: [
          value: 8.2
        ]
        precision: ".1f"

    id: 30203
  }
  {
    level: 3
    title: "Satisfaction spot<br>& évolution"

    parent_id: 201
    charts: [
      {
        data:
          query:
            domain: "<%= report.id %>_32205_0"
        chartType: "linechart"
        units:
          value: " %"
          date: ""

        crossfilter:
          on: "date"
        groups: "Centre"
        date: "date"
        value: "value"
        size: 0.25
        style: "secondary"
        cr: 4
        id: 0
      }
      {
        data:
          query:
            domain: "<%= report.id %>_32205_1"
        chartType: "leaderboardCenteredAverage"
        value: "value"
        label: "Centre"
        variation: "evolution"
        variationLegend: "Écart // 2011"
        units:
          value: " %"
          evolution: " %"
          Effectif: " répondants"

        meta: "Effectif"
        average: 77
        packs: "group"
        packsOrder: ["Caraibes", "Autres"]
        size: 0.75
        id: 1
      }
    ]
    id: 32205
  }
  {
    level: 3
    title: "Market breakdown<br>& évolution"

    parent_id: 201
    filters:
      "bottom-right":
        on: "breakdown"
        type: "buttons"
        datasets: [1]

    charts: [
      {
        data:
          query:
            domain: "<%= report.id %>_32206_0"
        chartType: "linechart"
        units:
          nb: " visites"
          date: ""
        events: [
          {
            date: "2014-08"
            label: "cote.nacre"
            domain: "Ouverture de Leroy Merlin"
          }
        ]
        legend: true
        crossfilter:
          on: "date"
          datasets: [1]

        groups: "poi_id"
        date: "date"
        value: "nb"
        selection:
          serie: "poi_id"
        size: 0.4
        style: "secondary no-spots scale-colors"
        cr: 4
        id: 0
      }
      {
        data:
          query:
            domain: "<%= report.id %>_32206_1"
        chartType: "stackedBarchart"
        groups: "group"
        label: "poi_id"
        time: "date"
        meta: ["total"]
        value: "nb"
        units:
          nb: " visites"

        # visualSelection: false
        legend: true
        selection:
          label: "poi_id"
        size: 0.7
        style: "gray-bg vertical-padding"
        id: 1
      }
    ]
    id: 32206
  }
  {
    level: 3
    title: "Historical<br>Sales"

    parent_id: 202
    chartOptions:
      data:
        query:
          domain: "<%= report.id %>_32104"
        date:
          selector: 'date'
          format: '%m-%y'

      chartType: "linechart"
      units:
        value: "M d'unités"
        date: "'s sales"
      events: [
        {
          date: "11-12"
          label: "Chaussures de ville"
          name: "Nouvelle collection"
        }
        {
          date: "02-14"
          label: "Baskets"
          name: "Soldes d'hiver"
        }
      ]
      value: "value"
      groups: "center"
      date: "date"
      legend: true

    id: 32104
  }
  {
    level: 3
    title: "Business Cycles"
    parent_id: 202
    filters:
      "bottom-right":
        on: "level_0"
        type: "buttons"
        order:
          custom: [
            "Données brutes"
            "Business Cycles"
          ]
    chartOptions:
      chartType: "linechart"
      data:
        query:
          domain: "<%= report.id %>_32105"
        date:
          selector: 'level_1'
          format: '%Y-%m-%d'
      units:
        "value": "%"
      value: "value"
      groups: "variable"
      date: "level_1"
      legend: true

    id: 32105
  }
  {
    level: 3
    title: "Detrending"
    commentary: [
      value: "This shows a comment depending on the comparison setting - Entity A"
      where:
        comparison: "Entity A"
      ,
        value: "This is a comment specific for the Trend filter and Entity B"
        where:
          selected: "Trend"
          comparison: "Entity B"
      ,
        value: "This is the default comment"
    ]
    parent_id: 202
    filters:
      "bottom-right":
        on: "breakdown"
        type: "buttons"
        order:
          custom: [
            "Données brutes"
            "Trend"
            "Detrended"
          ]
    chartOptions:
      chartType: "linechart"
      data:
        query:
          domain: "<%= report.id %>_32106"
        date:
          selector: 'index'
          format: '%Y-%m-%d'
      units:
        "value": ""
      value: "value"
      groups: "variable"
      date: "index"
      legend: true

    id: 32106
  }
  {
    level: 3
    title: "Sales<br>by market"

    parent_id: 202
    chartOptions:
      chartType: "linechart"
      data:
        query:
          domain: "<%= report.id %>_32107"
        date:
          selector: 'date'
          format: '%m-%y'

      units:
        value:
          type:
            units: " units"
            revenue: " $"

      value: "value"
      groups: "game"
      date: "date"
      legend: true

      filters:
        "upper-middle":
          on: "type"
          type: "buttons"
          order:
            custom: [
              "units"
              "revenue"
            ]

    filters:
      "bottom-right":
        on: "market"
        type: "buttons"
        order:
          custom: [
            "All"
            "iOS"
            "Google Play"
          ]

    id: 32107
  }
  {
    level: 3
    title: "Résumé des Objectifs"
    parent_id: 200
    filters:
      "bottom-right":
        type: "buttons"
        on: "breakdown"

    chartOptions:
      data:
        query:
          domain: "<%= report.id %>_30204"
      chartType: "bulletChart"
      packs: "group"
      meta: [""]
      label: "label"
      value: "value"
      target: "Objectif siège"
      comparison: "Last year"
      colorTargets: true
      units:
        value: "%"
      sentiment:
        value:
          domain: ['0.95*Objectif siège','1.1*Objectif siège']
          range: ['negative','warning','positive']

    recommendation:
      advert: "Reco"
      content: """
        Pour atteindre les objectifs de la thématique <em>travaux d'isolation</em> dans l'experience client, il convient de:
        <ul>
          <li>bien informer les clients sur les différentes méthodes d'isolation</li>
          <li>fournir un diagnostic energetique precis</li>
          <li>recontacter le client 3 mois après pour discuter avec lui des économies réalisées</li>
        </ul>
      """

    id: 30204
  }
  {
    level: 3
    title: "Découpage<br>Par Catégorie"
    parent_id: 200

    filters:
      "bottom-right":
        type: "buttons"
        on: "breakdown"

    chartOptions:
      data:
        order:
          by: "fréquence"
          custom: [
            "au moins 1 fois/mois"
            "plusieurs fois/an"
            "1 fois/an"
            "moins souvent"
            "jamais"
          ]
        query:
          domain: "market-breakdown"
          pays: "<%= report.entityName %>"
      chartType: "stackedBarchart"
      groups: "fréquence"
      hideTotal: true
      # visualSelection: false
      meta: ["clients"]
      label: "catégorie"
      value: "part"
      units:
        clients: "répondants"
        part: "%"

      unstackable: true

      outliers: [
        {
          label: "18-24 ans 2011"
          group: "moins souvent"
        }
        {
          label: "36-45 ans"
          group: "moins souvent"
        }
        {
          label: "56-65 ans"
          group: "jamais"
        }
        {
          label: "Agglo 1 2014"
          group: "plusieurs fois/an"
        }
        {
          label: "Agglo 3"
          group: "plusieurs fois/an"
        }
        {
          label: "Grande Ville 2"
          group: "1 fois/an"
        }
        {
          label: "Ville moyenne 4"
          group: "Au moins 1 fois/an"
        }
      ]
      legend: true

    id: 30206
  }
  {
    level: 3
    title: "Affluence"

    parent_id: 200
    chartOptions:
      filters:
        "upper-middle":
          on: "breakdown"
          type: "buttons"
      data:
        query:
          domain: "<%= report.id %>_32100"
        order:
          by: "label"
          custom: [
            "Lundi",
            "Mardi",
            "Mercredi",
            "Jeudi",
            "Vendredi",
            "Samedi",
            "Dimanche",
            "6h-10h",
            "10h-12h",
            "12h-14h",
            "14h-18h",
            "18h-20h",
            "20-22h"
          ]
      chartType: "horizontalBarchart"
      groups: "center"
      value: "value"
      label: "label"
      legend:
        daytime: "Average dwell time"
        weekday: "Average dwell time"

      units:
        value: " min"

    id: 32100
  }
  {
    level: 3
    title: "Conversion"

    parent_id: 200
    chartOptions:
      data:
        query:
          domain: "<%= report.id %>_32102"
      chartType: "horizontalBarchart"
      value: "Pourcentage"
      packs: "pack"
      groups: "group"
      sort: "desc"
      label: "Evenements"
      units:
        Pourcentage: " %"

      meta: "Effectif"

    id: 32102
  }
  {
    level: 3
    title: "SQL Server Analysis Services"

    parent_id: 30
    chartOptions:
      data:
        provider: "SSAS provider"
        query: """select {[Measures].[Montant des factures]} on columns,
                {[Dim Agence].[Libelle Agence].[Libelle Agence].ALLMEMBERS * [Dim Agence].[Code Agence].[Code Agence].ALLMEMBERS} on rows
                from [CER CUBE]
              """
        precision:
          "Montant des factures": ",.0f"
      chartType: "horizontalBarchart"
      value: "Montant des factures"
      label: "[Dim Agence].[Libelle Agence].[Libelle Agence]"
      groups: "center"
      sort: "desc"
      units:
        "Montant des factures": "€"

    id: 301
  }
  {
    level: 3
    title: "Google Sheets"

    parent_id: 30
    chartOptions:
      data:
        provider: "google-sheets"
        spreadsheetId: "1Eb9vsLT-v9M9iOSHKg9TD-lqHCQhtT3gwYc7zJs4Qjs"
        sheet: "States"
      chartType: "horizontalBarchart"
      value: "Value"
      label: "State"
      groups: ""
      sort: "desc"
      units:
        Value: ""

    id: 302
  }
  {
    level: 3
    title: "MySQL"

    parent_id: 30
    chartOptions:
      data:
        provider: "Some MySQL provider"
        query: """SELECT employees.first_name, annual_salaries.annual_salary AS annual_salary
                  FROM employees
                    LEFT JOIN
                  (SELECT emp_no, SUM(salary) AS annual_salary FROM salaries GROUP BY emp_no) AS annual_salaries
                    ON employees.emp_no = annual_salaries.emp_no
                  LIMIT 10;"""
      chartType: "horizontalBarchart"
      value: "annual_salary"
      label: "first_name"
      groups: "center"
      sort: "desc"
      units: "annual_salary": "$"

    id: 303
  }
  {
    level: 3
    title: "Google Analytics"

    parent_id: 30
    chartOptions:
      data:
        provider: "SomeGoogleAnalyticsProvider"
        query: """{
                      "viewId": "ga:99476610",
                      "dateRanges": [
                          {"startDate": "2016-01-01", "endDate": "2016-02-01"}
                      ],
                      "metrics": [
                          {"expression": "ga:pageviews"}
                      ],
                      "dimensions": [
                          {"name": "ga:hostname"}
                      ]
                  }"""
      chartType: "horizontalBarchart"
      value: "metric_value"
      label: "ga:hostname"
      groups: "center"
      sort: "desc"
      units: "metric_value": " views"

    id: 304
  }
  {
    level: 3
    title: "Google Big Query"

    parent_id: 30
    chartOptions:
      data:
        provider: "SomeGoogleBigQueryProvider"
        query: """SELECT * FROM [carbide-parser-133123:test.ventes] LIMIT 10;"""
      chartType: "horizontalBarchart"
      value: "value"
      label: "label"
      groups: "center"
      sort: "desc"
      units:
        "value": "€"

    id: 305
  }
  {
    level: 3
    title: "SAP Hana"

    parent_id: 30
    chartOptions:
      data:
#        provider: "hana_lhoist"
#        query: [
#          """SELECT '0' as plant_text, '0' as company_code_text, 0 as total
#          FROM toucan_hana
#          LIMIT 1"""
#        ,
#          """SELECT company_code_text, plant_text, SUM(material) AS total
#          FROM toucan_hana
#          GROUP BY plant_text, company_code_text
#          HAVING SUM(material) <> 0
#          ORDER BY total ASC
#          LIMIT 10"""
#        ,
#          """SELECT 'Total' as plant_text, 'Total' as company_code_text, SUM(total) as total FROM ( SELECT company_code_text, plant_text, SUM(material) AS total
#          FROM toucan_hana
#          GROUP BY plant_text, company_code_text
#          HAVING SUM(material) <> 0
#          ORDER BY total ASC
#          LIMIT 10)"""
#        ]
#        multiple_queries: true
#      chartType: "waterfall"
#      value: "TOTAL"
#      label: "COMPANY_CODE_TEXT"
#      sublabel: "PLANT_TEXT"
#      sort: "desc"
#      units: "TOTAL": "€"
        provider: "Some SapHana provider"
        query: """SELECT NAME, GOALS FROM PYHDB_DEMO"""
      chartType: "horizontalBarchart"
      value: "GOALS"
      label: "NAME"
      sort: "desc"
      units:
        "GOALS": " goals"

    id: 306
  }
  {
    level: 3
    title: "Musées<br>visités"

    parent_id: 200
    chartOptions:
      data:
        query:
          domain: "<%= report.id %>_32101"
      chartType: "barchart"
      value: "NB visit"
      label: "NB store"
      groups: "center"
      units:
        "NB visit": "% of visitors"

    id: 32101
  }
  {
    level: 3
    title: "Clients par<br>departements"

    filters:
      "bottom-right":
        on: "breakdown"
        type: "buttons"
    parent_id: 204
    chartOptions:
      data:
        query:
          domain: "<%= report.id %>_34201"
      chartType: "carto"
      join: "CODE_DEPT"
      label: "NOM_DEPT"
      value: "value"
      peers: " "
      zoomScaleMin: 0.2
      zoomScaleMax: 8
      levels: 4
      meta: [
        "population"
        "chomage 4 2012"
      ]
      projection: "departement"
      cartoFiles:
        " ": "depts-details-topojson.json"

      units:
        "Faits élucidés": ""
        "Faits constatés": " "
        population: " habitants"
        "chomage 4 2012": "% de chomage"

    id: 34201
  }
  {
    level: 3
    title: "World Map"
    parent_id: 204
    chartOptions:
      data:
        query:
          domain: "<%= report.id %>_34204"
      chartType: "carto"
      join: "Country Code"
      label: "Country Name"
      value: "Value"
      peers: " "
      levels: 4
      projection: "world"
      cartoFiles:
        " ": "world-topojson.json"

      units:
        "Value": "Mds €"
    id: 34204
  }
  {
    level: 3
    title: "World Map Crossfilter"
    parent_id: 204
    charts: [
      {
        data:
          query:
            domain: "<%= report.id %>_34204"
        chartType: "carto"
        join: "Country Code"
        label: "Country Name"
        value: "Value"
        peers: " "
        levels: 4
        projection: "world"
        cartoFiles:
          " ": "world-topojson.json"
        crossfilter:
          on: "Country Code"
          datasets: [1]

        units:
          "Value": "Mds €"
        size: 0.5
        style: "secondary"
        id: 0
      }
      {
        data:
          query:
            domain: "<%= report.id %>_34204"
        chartType: "horizontalBarchart"
        value: "Value"
        label: "Country Name"
        units:
          Value: " Mds€"
        size: 0.5
        id: 1
      }
    ]
    id: 32210
  }
  {
    level: 3
    title: "Trafic<br>geolocalisé"

    filters:
      "bottom-right":
        on: "breakdown"
        type: "buttons"
    parent_id: 204
    chartOptions:
      data:
        query:
          domain: "<%= report.id %>_34200"
      chartType: "carto"
      levels: 4
      join: "EntityHand"
      value: "value"
      label: "Retailer name"
      peers: "Branch level 2"
      projection: "plan"

      meta: [
        "GLA"
        "Lease end"
      ]

      cartoFiles:
        "Floor 0": "MAP_CS_0_topojson.json"
        "Floor 1": "MAP_CS_1_topojson.json"

      units:
        "Shop Front Traffic": ""
        "Destination Traffic": "%"
        "Shop Front Conversion": "%"
        Visits: " visits"
        GLA: "m²"

      filters:
        'arrow-selector':
          on: 'floor'

    id: 34200
  }

  {
    level: 3
    title: "Treemap"
    filters:
      "bottom-right":
        on: "breakdown"
        type: "buttons"

    parent_id: 206
    chartOptions:
      data:
        query:
          domain: "treemap"
        precision:
          pop: ',.1f'
      chartType: "treemap"
      value: "pop"
      color: true
      target: "target"
      sortByValues: true
      labels: ['year','cat','type']
      filters:
        "upper-middle":
          reset: "All"
          on: "cat"
          type: "dropdown"
     # sentiment:
     #   target:
     #     domain: [-5,5]
     #     range: ['negative','warning','positive']
      meta: []
    id: 20615
  }
  {
    level: 3
    title: "Heatmap"
    commentary: [
      value: "The heatmap helps you to see what's going on instantly - Amount filter"
      where:
        selected: "Amount"
      ,
        value: "This is a comment specific for the volume filter"
        where:
          selected: "Volume"
      ]
    filters:
      "bottom-right":
        on: "breakdown"
        type: "buttons"

    parent_id: 206
    chartOptions:
      data:
        query:
          domain: "heatmap"
      chartType: "heatmap"
      legend: true
      x: "voiture"
      xpack: "segment"
      y: "pays"
      ypack: "zone"
      value: "value"
      target: "target"
      variation: "variation"
      reverse: true
      sentiment:
        value:
          domain: ['0.8*target','target']
          range: ['negative','neutral','positive']
      meta: []
      units:
        value: '%'
        variation: 'pt'
    id: 20600
  }
  {
    level: 3
    title: "Contribution<br>à la satisfaction"

    filters:
      "bottom-right":
        on: "type"
        type: "buttons"

    parent_id: 206
    chartOptions:
      data:
        query:
          domain: "0_35201"
      chartType: "bubblechart"
      legend: true
      label: "label"
      units:
        cx: "%"
        cy: "%"
        r: " répondants"

      cx: "Satisfaction"
      cy: "Contribution"
      r: "effectif"
      color: "evolution"
      drill:
        group: "drillGroup"
        level: "drillLevel"
        levelsOrder: ['main','sub']

    id: 35201
  }
  {
    level: 3
    title: "Crossfiltered Heatmap"
    parent_id: 206
    charts: [
      {
        data:
          query:
            domain: "heatmap"
        chartType: "heatmap"
        legend: true
        x: "voiture"
        xpack: "segment"
        y: "pays"
        ypack: "zone"
        value: "value"
        target: "target"
        variation: "variation"
        reverse: true
        crossfilter:
          on: "concat"
          datasets: [1]
        sentiment:
          value:
            domain: ['0.8*target','target']
            range: ['negative','neutral','positive']
        meta: []
        units:
          value: '%'
          variation: 'pt'
        size: 0.5
        style: "secondary"
        id: 0
      }
      {
        data:
          query:
            domain: 'slave_heatmap'
        chartType: "leaderboardCenteredAverage"
        value: "variation"
        label: "breakdown"
        hideAverageBox: true
        units:
          variation: " %"
        average: 0
        size: 0.5
        id: 1
      }
    ]
    id: 35223
  }
  {
    level: 3
    title: "Taux de <br>Pénétration"

    filters:
      "bottom-right":
        on: "breakdown"
        type: "buttons"
    parent_id: 206

    chartOptions:
      data:
        query:
          domain: "0_36200"
      chartType: "bubblechart"
      label: "label"
      legend:
        cy: "Promotion"
        cx: "Ancienneté"
        r: "salariés"
      units:
        cx: " mois"
        cy: " jours"
        r: " salariés"

      cx: "Ancienneté"
      cy: "Promotion"
      r: "effectif"
      color: "color"
      withBenchmark: true

    id: 36200
  }
  {
    level: 3
    title: "Canaux de<br>communication"
    parent_id: 206
    filters:
      "bottom-right":
        on: "marche"
        type: "buttons"


    chartOptions:
      data:
        query:
          domain: "0_36202"
      chartType: "forceDirectedChart"
      label: "comportement"
      value: "pourcentage"
      links: [
        source: "Tel/mails exclusivement"
        target: "Tous les canaux"
      ,
        source: "Face à face exclusivement"
        target: "Tous les canaux"
      ,
        source: "Canaux digitaux exclusivement"
        target: "Tous les canaux"
      ,
        source: "Tel/mails exclusivement"
        target: "Tel/mails et canaux digitaux"
      ,
        source: "Tel/mails exclusivement"
        target: "Face à face et téléphone"
      ,
        source: "Face à face exclusivement"
        target: "Face à face et téléphone"
      ,
        source: "Face à face exclusivement"
        target: "Face à face et canaux digitaux"
      ,
        source: "Canaux digitaux exclusivement"
        target: "Face à face et canaux digitaux"
      ,
        source: "Canaux digitaux exclusivement"
        target: "Tel/mails et canaux digitaux"
      ]

      meta: [
        "pourcentage"
        "effectif"
      ]

      units:
        pourcentage: " %"
        "pourcentage groupe": " %"
        "effectif": " clients"
        "effectif groupe": " clients"

      groups: "groupe"
      groupsMeta: [
        "pourcentage groupe"
        "effectif groupe"
      ]

      selection:
        label: "canal"

      legend: true

    id: 36202
  }
  {
    level: 3
    title: "Free cash flow"

    parent_id: 207
    chartOptions:
      data:
        query:
          domain: "0_37100"
      chartType: "waterfall"
      value: "2013"
      label: "label"
      sublabel: "label_sublevel"
      units:
        "2013": " k€"

    id: 37100
  }
  {
    level: 3
    title:"KPI Comparator"
    parent_id: 207
    id: 10004
    filters:
      "bottom-right":
        on: "variable"
        datasets:[1]
        type: "buttons"
    datasets:
      bars_data:
        query:[
          $match:
            domain: "dynamic_barlinechart"
        ]
        postprocess: [
          melt:
            id: ['Vehicle','year','day']
            value: ['<%= requestersManager.metric_bar %>']
        ]
        precision:
          value: ",.0f"
        date:
          selector:"day"
          format:"%m/%d"
      lines_data:
        query:[
          $match:
            domain: "dynamic_barlinechart"
        ]
        postprocess: [
          melt:
            id: ['Vehicle','year','day']
            value: ["<%= requestersManager.metric_line %>"]
        ]
        precision:
          value: ",.0f"
        date:
          selector:"day"
          format:"%m/%d"
    chartOptions:
      chartType: "new-barlinechart"
      units:
        value: " "
      requesters:
        'upper-middle':
          id: "metric_line"
          type: "dropdown"
          query:[
            $match:
              domain: "dynamic_barlinechart"
          ]
          postprocess: [
            melt:
              id: ['Vehicle','year','day']
              value: ['Media spent','VehicleSessions','FinalizedConfigurations','Total leads','Retail Commercial Offers','Total orders']
          ]
          fields: ['variable']
        'upper-right':
          id: "metric_bar"
          type: "dropdown"
          query:[
            $match:
              domain: "dynamic_barlinechart"
          ]
          postprocess: [
            melt:
              id: ['Vehicle','year','day']
              value: ['VehicleSessions','Media spent','FinalizedConfigurations','Total leads','Retail Commercial Offers','Total orders']
          ]
          fields: ['variable']

      bars: dataset: 'bars_data'

      label: "day"
      value: "value"
      groups: "variable"
      lines:
        dataset: "lines_data"
        x: 'day'
        y: 'value'
        serie: "variable"
      legend: 'minimal'
  }
  {
    level: 3
    title: "Resultat Op.<br>et marge"

    parent_id: 207
    filters:
      "bottom-right":
        on: "Activité"
        type: "buttons"
    datasets:
      bars_data:
        query:
          domain: "0_37101"
          kpi: 'Marge'
        precision:
          value:[
            precision: ",.0f"
            where:
              kpi: "CA"
          ,
            precision: ".2f"
            where:
              kpi: "Marge"
          ]
      lines_data:
        query:
          domain: "0_37101"
          kpi: 'CA'
        precision:
          value:[
            precision: ",.0f"
            where:
              kpi: "CA"
          ,
            precision: ".2f"
            where:
              kpi: "Marge"
          ]
    chartOptions:
      chartType: "new-barlinechart"
      units:
        CA: " M€"
        Marge: "%"
      meta: [
        "Var CA"
        "Var Marge"
      ]
      bars:
        dataset: 'bars_data'
        domain: [0,5.5]
      label: "date"
      value: 'value'
      groups: 'Activité'
      lines:
        dataset: 'lines_data'
        x: 'date'
        y: 'value'
        serie: 'Activité'
        domain: [0,1980]

      zeroBaseline: 0
      legend: 'minimal'

    id: 37101
  }
  {
    level: 3
    title: "Repartition<br>par branche"

    filters:
      "bottom-right":
        on: "metric"
        type: "buttons"

    parent_id: 207
    chartOptions:
      data:
        query:
          domain: "<%= report.id %>_37102"
      chartType: "slopegraph"
      label: "Activite"
      meta: ["proportion"]
      evolution: "evolution"
      value: "value"
      date: "annee"
      units:
        evolution: "%"
        proportion: "%"

    id: 37102
  }
  {
    level: 3
    title: "retours Clients"

    parent_id: 20
    filters:
      "upper-middle":
        on: "Theme"
        type: "dropdown"
    chartOptions:
      data:
        query:
          domain: "<%= report.id %>_30205"
      chartType: "verbatim"
      categories: [
        "Theme"
        "Agence"
        "Segment"
        "Age"
      ]
      verbatimSelector: "Verbatims"

    id: 30205
  }
  {
    level: 3
    title: "Chiffres-clefs"

    chartOptions:
      data:
        query:
          domain: "<%= report.id %>_40206"
      chartType: "score-card"
      variation: "evolution"
      variationLegend: "Compared with last year"
      value: "Value"
      label: "Label"
      packs: "Group"
      sort: "desc"
      units:
        value: [
          unit: " To"
          where:
            Label: "Volumétrie totale"
        ,
          unit: " %"
          where:
            Label: "Mutualisés"
        ,
          unit: " %"
          where:
            Label: "Stock"
        ,
          unit: " %"
          where:
            Label: "Souscription"
        ,
          unit: " %"
          where:
            Label: "Consommation"
        ]
        evolution: [
          unit: "%"
        ,
          unit: " pts"
          where:
            Label: "Notes"
        ]

    parent_id: 20
    id: 40206
  }
  {
    level: 3
    title: "Faits marquants"
    parent_id: 20
    id: 30207
    chartOptions:
      chartType: "timeline"
      data:
        date:
          selector: "start_date"
          format: "%Y-%m-%d"
        query:
          domain: "timeline"
      startDate: "start_date"
      endDate: "end_date"
      headline: "headline"
      text: "text"
      content: "content"
      mediaType: "media_type"
      mediaSource: "media_source"
      caption: "caption"
      meta: [
        "text"
      ]
      filters:
        "upper-right":
          on: "media_type"
          type: "dropdown"
          reset: "All"
          withSize: true
    filters:
      "bottom-right":
        type: "buttons"
        on: "type"
  }
  {
    level: 1
    title: "Charts"
    id: 40
  }
  {
    level: 2
    title: "Linechart"
    parent_id: 40
    id: 410
  }
  {
    level: 3
    title: "Simple linechart"
    parent_id: 410
    id: 41010

    chartOptions:
      chartType: "linechart"
      data:
        query:
          domain: "0_32106"
          breakdown: "Detrended"
        date:
          selector: 'index'
          format: '%Y-%m-%d'
      units:
        "value": ""
      value: "value"
      date: "index"
      legend: true

  }
  {
    level: 3
    title: "Linechart with sentimentZone"
    parent_id: 410
    id: 41011

    chartOptions:
      sentimentZones: [
        {
          domain: [
            -200
            200
          ]
          sentiment: 'positive'
          label:
            text: 'Sentiment Zone description here'
            position: 'top'
        }
      ]
      chartType: "linechart"
      data:
        query:
          domain: "0_32106"
          breakdown: "Detrended"
        date:
          selector: 'index'
          format: '%Y-%m-%d'

      units:
        "value": ""
      value: "value"
      date: "index"
      legend: true
  }
  {
    level: 2
    title: "Horizontal barchart"
    parent_id: 40
    id: 403
  }
  {
    level: 3
    title: "With groups"
    parent_id: 403

    chartOptions:

      data:
        query:
          domain: "horizontal_barchart_groups"
        order:
          by: "label"

      chartType: "horizontalBarchart"
      groups: "cat"
      value: "value"
      label: "label"
      legend: true

      units:
        value: "%"
    filters:
      "bottom-right":
        on: "type"
        type: "buttons"
        order:
          custom:[
            "3 mois glissants"
            "Mois en cours"
            "12 mois glissants"]

    id: 40301
  }
  {
    level: 3
    title: "With ordinal scaled sparklines"

    parent_id: 403
    chartOptions:
      data:
        query:
          domain: "horizontal_barchart_evolution"

      chartType: "horizontalBarchart"
      value: "Pourcentage"
      variation: "evolution"
      variationLegend: "Écart<br>année passée"
      label: "Evenements"
      units:
        Pourcentage: " %"
        evolution: "%"

      sort: "desc"
      sparklines:
        data:
          query:
            domain: "horizontal_barchart_sparklines"
        joins: ["Evenements"]
        legend: "Évolution<br>sur 8 mois"
        value: "Value"
        date: "Date"
        unit: "%"
        orderDates: true
      showAverage: true
      meta: "Effectif"

    id: 40302
  }
  {
    level: 3
    title: "With date scaled sparklines"

    parent_id: 403
    chartOptions:
      data:
        query:
          domain: "horizontal_barchart_evolution"
      chartType: "horizontalBarchart"
      value: "Pourcentage"
      variation: "evolution"
      variationLegend: "Écart<br>année passée"
      label: "Evenements"
      units:
        Pourcentage: " %"
        evolution: "%"

      sort: "desc"
      sparklines:
        data:
          query:
            domain: "horizontal_barchart_sparklines"
          date:
            selector: "Date"
            format: "%m"
        joins: ["Evenements"]
        legend: "Évolution<br>sur 8 mois"
        value: "Value"
        date: "Date"
        dateFormat: "%B %Y"
        unit: "%"
      showAverage: true
      meta: "Effectif"

    id: 40303
  }
  {
    level: 3
    title: "With legacy sparklines"

    parent_id: 403
    chartOptions:
      data:
        query:
          domain: "horizontal_barchart_legacy_sparklines"

      chartType: "horizontalBarchart"
      value: "Pourcentage"
      variation: "evolution"
      variationLegend: "Écart<br>année passée"
      label: "Evenements"
      units:
        Pourcentage: " %"
        evolution: "%"

      sort: "desc"
      sparklines:
        prefix: "sparkline"
        legend: "Évolution<br>sur 8 mois"
        unit: "%"
      showAverage: true
      meta: "Effectif"

    id: 40304
  }
  {
    level: 3
    title: "With average"
    parent_id: 403

    chartOptions:

      data:
        query:
          domain: "horizontal_barchart_simple"

      chartType: "horizontalBarchart"
      groups: "cat"
      value: "value"
      label: "label"

      average: 85

      units:
        value: "%"

    id: 40305
  }
  {
    level: 3
    title: "With average and filters"
    parent_id: 403

    filters:
      "bottom-right":
        on: "type"
        type: "buttons"
        order:
          custom:[
            "3 mois glissants"
            "Mois en cours"
            "12 mois glissants"]

    chartOptions:
      data:
        query:
          domain: "horizontal_barchart_groups"

      chartType: "horizontalBarchart"
      value: "value"
      label: "label"

      average:
        data: query: domain: "horizontal_barchart_groups_avg"
        joins: [
          "cat"
          "type"
        ]
        value: "value"

      averageText: "France"

      units:
        value: "%"

      filters:
        "upper-right":
          on: "cat"
          type: "dropdown"

    id: 40306
  }
  {
    level: 2
    title: "Centered Avg"
    parent_id: 40
    id: 402
  }
  {
    level: 3
    title: "With slider filter"
    parent_id: 402
    chartOptions:
      data:
        query:
          domain: "<%= report.id %>_201_1"
      chartType: "leaderboardCenteredAverage"
      value: "value"
      label: "label"
      variation: "evolution"
      variationLegend: "Écart // 2011"
      units:
        value: " %"
        evolution: " %"
        Effectif: " répondants"
      filters:
        "upper-right":
          on: "toto"
          type: "dropdown"

      meta: "Effectif"
      legend: true
      average: 1
      packs: "group"
    id: 40200
  }
  {
    level: 3
    title: "With dependent average"
    parent_id: 402
    filters:
      "bottom-right":
        on: "toto"
        type: "slider"
    chartOptions:
      data:
        query:
          domain: "<%= report.id %>_201_1"
      chartType: "leaderboardCenteredAverage"
      value: "value"
      label: "label"
      variation: "evolution"
      variationLegend: "Écart // 2011"
      units:
        value: " %"
        evolution: " %"
        Effectif: " répondants"

      meta: "Effectif"
      average:
        values: [
          value: 1
          toto: "2010"
        ,
          value: 2
          toto: "2011"
        ,
          value: 1
          toto: "2012"
        ,
          value: 3
          toto: "2013"
        ,
          value: 0
          toto: "2014"
        ,
          value: 1
          toto: "2015"
        ]
        value: "value"
        joins: [
          "toto"
        ]
      packs: "group"
    id: 40201
  }
  {
    level: 3
    title: "With dynamically queried average"
    parent_id: 402
    filters:
      "bottom-right":
        on: "toto"
        type: "slider"
    chartOptions:
      data:
        query:
          domain: "<%= report.id %>_201_1"
      chartType: "leaderboardCenteredAverage"
      value: "value"
      label: "label"
      variation: "evolution"
      variationLegend: "Écart // 2011"
      units:
        value: " %"
        evolution: " %"
        Effectif: " répondants"

      meta: "Effectif"
      average:
        data:
          query: domain: "<%= report.id %>_201_1_avg"
        value: "value"
        joins: [
          "toto"
        ]
      packs: "group"
    id: 40202
  }
  {
    level: 2
    title: "Bullet charts"
    parent_id: 40
    id: 401
  }
  {
    level: 3
    title: "Bullet chart"
    parent_id: 401
    filters:
      "bottom-right":
        type: "buttons"
        on: "breakdown"

    chartOptions:
      data:
        query:
          domain: "<%= report.id %>_30204"
      chartType: "bulletChart"
      packs: "group"
      meta: ["Objectif siège"]
      label: "label"
      value: "value"
      target: "Objectif siège"
      comparison: "Last year"
      units:
        value: "%"
        'Objectif siège': "%"

    id: 40101
  }
  {
    level: 3
    title: "Common scale"
    parent_id: 401
    filters:
      "bottom-right":
        type: "buttons"
        on: "breakdown"

    chartOptions:
      data:
        query:
          domain: "<%= report.id %>_30204"
      chartType: "bulletChart"
      packs: "group"
      meta: [""]
      label: "label"
      value: "value"
      target: "Objectif siège"
      comparison: "Last year"
      units:
        value: "%"
      commonScale: true

    id: 40102
  }
  {
    level: 3
    title: "Sparklines"
    parent_id: 401
    filters:
      "bottom-right":
        type: "buttons"
        on: "breakdown"

    chartOptions:
      data:
        query:
          domain: "<%= report.id %>_30204"
      chartType: "bulletChart"
      packs: "group"
      meta: [""]
      label: "label"
      value: "value"
      target: "Objectif siège"
      comparison: "Last year"
      units:
        value: "%"

      sparklines:
        data:
          date:
            selector: "date"
            format: "%Y-%m"
          query:
            domain: "bullet_chart_sparklines"
        value: "value"
        date: "date"
        joins: [
          "label"
          "group"
        ]
        unit: "%"
        dateFormat: "%B %Y"

    id: 40103
  }
  {
    level: 2
    title: "Waterfall"
    parent_id: 40
    id: 404
  }
  {
    level: 3
    title: "Waterfall"
    parent_id: 404

    chartOptions:
      chartType: "filtrable-waterfall"
      zeroBaseline: 0
      drillLevel: "drill_level"
      drillGroup: "drill_group"
      order: "display_order"
      value: "value"
      evolution: "evol"
      meta: "meta"
      label: 'label'

      data:
        # order:
        #   by: 'index'
        query:
          domain: "waterfall_new"
      # sublabel: 'label_sublevel'
      # meta: 'Actuel'
      units:
        "value": " M€"

    id: 40401
  }
  {
    level: 3
    title: "Waterfall filtered"
    parent_id: 404

    chartOptions:
      chartType: "filtrable-waterfall"
      zeroBaseline: 0
      drillLevel: "drill_level"
      drillGroup: "drill_group"
      order: "display_order"
      value: "value"
      evolution: "evol"
      meta: "meta"
      label: 'label'

      data:
        query:
          domain: "waterfall_new_categorized"
      # sublabel: 'label_sublevel'
      # meta: 'Actuel'
      units:
        "value": " M€"

    id: 40402

    filters:
      "bottom-right":
        type: "buttons"
        on: "category"
  }
  {
    level: 2
    title: "Funnelchart"
    parent_id: 40
    id: 405
  }
  {
    level: 3
    title: "Funnelchart"
    parent_id: 405
    filters:
      "bottom-right":
        type: "buttons"
        on: "breakdown"
    chartOptions:
      chartType: "funnelChart"
      value: "value"
      label: 'label'
      variation: "variation"
      variationLegend: 'Versus last year'
      data:
        query:
          domain: 'funnelchart'
      units:
        value: "%"
        variation: "%"
    highlightedKpis: [
      name: "Conversion rate"
      value: "value"
      unit: "%"
      badge: 'evolution'
      comment: "vs 2015"
      sentiment:
        value:
          domain: [0]
          range: ['negative','positive']
      precision:
        value: ',.0f'
      data:
        value:
          query:
            domain: 'funnelchart'
          field: 'value'
    ,
      name: "Churn rate"
      value: "value"
      unit: "%"
      badge: 'evolution'
      comment: "vs 2015"
      sentiment:
        value:
          domain: [0]
          range: ['negative','positive']
      precision:
        value: ',.0f'
      data:
        value:
          query:
            domain: 'funnelchart'
          field: 'variation'
    ]

    id: 40501
  }
  {
    level: 3
    title: "New datasets syntax"
    parent_id: 405
    filters:
      "bottom-right":
        type: "buttons"
        on: "breakdown"
        datasets: ['marketing_funnel']
    datasets:
      marketing_funnel:
        query:
          domain: 'funnelchart'
    chartOptions:
      chartType: "funnelChart"
      dataset: 'marketing_funnel'
      value: "value"
      label: 'label'
      variation: "variation"
      variationLegend: 'Versus last year'
      units:
        value: "%"
        variation: "%"
    highlightedKpis: [
      name: "Conversion rate"
      value: "value"
      unit: "%"
      badge: 'evolution'
      comment: "vs 2015"
      sentiment:
        value:
          domain: [0]
          range: ['negative','positive']
      precision:
        value: ',.0f'
      data:
        value:
          query:
            domain: 'funnelchart'
          field: 'value'
    ,
      name: "Churn rate"
      value: "value"
      unit: "%"
      badge: 'evolution'
      comment: "vs 2015"
      sentiment:
        value:
          domain: [0]
          range: ['negative','positive']
      precision:
        value: ',.0f'
      data:
        value:
          query:
            domain: 'funnelchart'
          field: 'variation'
    ]

    id: 40502
  }
  {
    level: 2
    title: "Maps"
    parent_id: 40
    id: 406
  }
  {
    level: 3
    title: "Zones only"
    filters:
      "bottom-right":
        on: "breakdown"
        type: "buttons"
        datasets: ['dept_data']
    parent_id: 406

    datasets:
      dept_data:
        query:
          domain: "<%= report.id %>_34201"

    chartOptions:
      chartType: "mapchart"
      zones:
        dataset: 'dept_data'
        shapes: "depts-details-topojson.json"
        join:
          shapes: "CODE_DEPT"
          data: "CODE_DEPT"
        color: "value"

      tiles: {}

      zoom:
        scale: 1415
        translate: [455, 1794]

    id: 40601
  }
  {
    level: 3
    title: "With tiles"

    filters:
      "bottom-right":
        on: "breakdown"
        type: "buttons"
        datasets: ['dept_data']
    parent_id: 406

    datasets:
      dept_data:
        query:
          domain: "<%= report.id %>_34201"

    chartOptions:
      chartType: "mapchart"
      zones:
        dataset: 'dept_data'
        shapes: "depts-details-topojson.json"
        join:
          shapes: "CODE_DEPT"
          data: "CODE_DEPT"
        color: "value"
      tiles: {}

    id: 40602
  }
  {
    level: 3
    title: "With markers"

    parent_id: 406

    datasets:
      cities_data:
        query:
          domain: "cities_data"

    chartOptions:
      chartType: "mapchart"
      markers:
        dataset: 'cities_data'
        latitude: 'latitude'
        longitude: 'longitude'
        label: 'name'
        color: "country"
      tiles: {}

    id: 40603
  }
  {
    level: 3
    title: "With filtered markers"

    filters:
      "bottom-right":
        on: "type"
        type: "buttons"
        datasets: ['cities_data']
    parent_id: 406

    datasets:
      cities_data:
        query:
          domain: "cities_data"

    chartOptions:
      chartType: "mapchart"
      markers:
        dataset: 'cities_data'
        latitude: 'latitude'
        longitude: 'longitude'
        label: 'name'
        color: "country"
      tiles: {}

    id: 40604
  }
  {
    level: 3
    title: "With open street map tiles"

    filters:
      "bottom-right":
        on: "breakdown"
        type: "buttons"
        datasets: ['dept_data']
    parent_id: 406

    datasets:
      dept_data:
        query:
          domain: "<%= report.id %>_34201"

    chartOptions:
      chartType: "mapchart"
      zones:
        dataset: 'dept_data'
        shapes: "depts-details-topojson.json"
        join:
          shapes: "CODE_DEPT"
          data: "CODE_DEPT"
        color: "value"
      tiles:
        src: "http://a.tile.openstreetmap.org/{{Z}}/{{X}}/{{Y}}.png"

    id: 40605
  }
  {
    level: 3
    title: "With stramen tiles"

    filters:
      "bottom-right":
        on: "breakdown"
        type: "buttons"
        datasets: ['dept_data']
    parent_id: 406

    datasets:
      dept_data:
        query:
          domain: "<%= report.id %>_34201"

    chartOptions:
      chartType: "mapchart"
      zones:
        dataset: 'dept_data'
        shapes: "depts-details-topojson.json"
        join:
          shapes: "CODE_DEPT"
          data: "CODE_DEPT"
        color: "value"
      tiles:
        src: "http://a.tile.stamen.com/toner-lite/{{Z}}/{{X}}/{{Y}}.png"

    id: 40606
  }
  {
    level: 3
    title: "Zones, markers & legend"
    filters:
      "bottom-right":
        on: "breakdown"
        type: "buttons"
        datasets: ['dept_data']
    parent_id: 406

    datasets:
      dept_data:
        query:
          domain: "<%= report.id %>_34201"
        precision:
          value: ".1f"
      cities_data:
        query:
          domain: "cities_data"

    chartOptions:
      chartType: "mapchart"
      legend: true
      zones:
        dataset: 'dept_data'
        shapes: "depts-details-topojson.json"
        join:
          shapes: "CODE_DEPT"
          data: "CODE_DEPT"
        label: "NOM_DEPT"
        color: "value"
        meta: ["CODE_DEPT"]
      markers:
        dataset: 'cities_data'
        latitude: 'latitude'
        longitude: 'longitude'
        label: 'name'
        color: "country"
        meta: ["CODE_DEPT"]

    id: 40607
  }
  {
    level: 2
    title: "Vertical barchart"
    parent_id: 40
    id: 407
  }
  {
    level: 3
    title: "With groups"

    parent_id: 407
    chartOptions:
      data:
        query:
          domain: "<%= report.id %>_32101"
      chartType: "barchart"
      value: "NB visit"
      label: "NB store"
      groups: "center"
      units:
        "NB visit": "% of visitors"

    id: 40701
  }
  {
    level: 3
    title: "With legend"

    parent_id: 407
    chartOptions:
      data:
        query:
          domain: "<%= report.id %>_32101"
      chartType: "barchart"
      value: "NB visit"
      label: "NB store"
      groups: "center"
      units:
        "NB visit": "% of visitors"
      legend: true

    id: 40702
  }
  {
    level: 3
    title: "With upper-middle filter"

    parent_id: 407
    chartOptions:
      data:
        query:
          domain: "<%= report.id %>_32101"
      chartType: "barchart"
      value: "NB visit"
      label: "NB store"
      # groups: "center"
      units:
        "NB visit": "% of visitors"
      legend: true

      filters:
        "upper-middle":
          type: "buttons"
          on: "center"

    id: 40703
  }
  {
    level: 2
    title: "Text slide"
    parent_id: 40
    id: 408
  }
  {
    level: 3
    title: "Text Slide"

    parent_id: 408
    chartOptions:
      src: "README"
      chartType: "text"

    id: 40801
  }
  {
    level: 2
    title: "Bar and line chart"
    parent_id: 40
    id: 409
  }
  {
    level: 3
    title: "Bar and lines"

    parent_id: 409

    datasets:
      bars_data: query: domain: 'barlines_bars'
      lines_data: query: domain: 'barlines_lines'

    chartOptions:
      chartType: 'new-barlinechart'

      bars:
        dataset: 'bars_data'
      label: 'year'
      value: 'value'
      groups: 'serie'

      lines:
        dataset: 'lines_data'
        x: 'year'
        y: 'value'
        serie: 'serie'

      legend: true

    id: 40901
  }
  {
    level: 1
    title: "Extras"
    id: 50
  }
  {
    level: 3
    title: "Highlighted KPIs"
    parent_id: 50
    id: 50001

    chartOptions:
      data:
        query:
          domain: "0_32101"
      chartType: "barchart"
      value: "NB visit"
      label: "NB store"
      groups: "center"
      units:
        "NB visit": "% of visitors"

    highlightedKpis: [
      name: " Average evolution"
      value: "avgValue"
      badge: 'avgValue'
      comment: "vs 2016"
      sentiment:
        avgValue:
          domain: [0]
          range: ['negative','positive']
      precision:
        avgValue: ',.1%'
      data:
        avgValue:
          query: [
              $match:
                domain: "0_32101"
            ,
              $group:
                _id: null
                value:
                  $avg: "$Increase"
            ,
              $project:
                _id: 0
                value: 1
          ]
          field: 'value'
    ]
  }
]
